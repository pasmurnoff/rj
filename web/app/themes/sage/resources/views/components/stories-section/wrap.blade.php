<section class="section">
    <div class="container">
        <div class="section__title">
            <h2>Истории</h2>
        </div>
        <div class="section__info">
            <div class="section__text">
                <p>Реальные истории людей, которые помогают не сдаваться.</p>
            </div>
        </div>

        <div class="stories-cards">
            <div class="card">
                <div class="card__person">
                    <div class="card__image">
                        <div class="card__photo">
                            <img src="@asset('images/stories/1.png')">
                        </div>
                    </div>
                    <div class="card__info">
                        <div class="card__name">
                            <span>Климентий Исмагилов</span>
                        </div>
                        <div class="card__age">
                            <span>35 лет</span>
                        </div>
                    </div>
                </div>
                <div class="card__quote_yellow">
                    <blockquote class="collapsible-quote">
                        <div>
                            <svg width="8" height="6" viewBox="0 0 8 6" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M1.98 0.705999C2.148 0.478 2.334 0.351999 2.538 0.327999C2.742 0.303999 2.916 0.345999 3.06 0.454C3.216 0.55 3.3 0.7 3.312 0.903999C3.336 1.108 3.252 1.324 3.06 1.552C2.784 1.876 2.598 2.2 2.502 2.524C2.406 2.848 2.358 3.136 2.358 3.388L2.286 2.668C2.766 2.668 3.156 2.806 3.456 3.082C3.756 3.358 3.906 3.73 3.906 4.198C3.906 4.642 3.768 5.008 3.492 5.296C3.216 5.572 2.838 5.71 2.358 5.71C1.866 5.71 1.482 5.548 1.206 5.224C0.93 4.888 0.792 4.426 0.792 3.838C0.792 3.526 0.822 3.208 0.882 2.884C0.942 2.548 1.056 2.206 1.224 1.858C1.404 1.498 1.656 1.114 1.98 0.705999ZM5.796 0.705999C5.964 0.478 6.15 0.351999 6.354 0.327999C6.558 0.303999 6.732 0.345999 6.876 0.454C7.032 0.55 7.116 0.7 7.128 0.903999C7.152 1.108 7.068 1.324 6.876 1.552C6.6 1.876 6.414 2.2 6.318 2.524C6.222 2.848 6.174 3.136 6.174 3.388L6.102 2.668C6.582 2.668 6.972 2.806 7.272 3.082C7.572 3.358 7.722 3.73 7.722 4.198C7.722 4.642 7.584 5.008 7.308 5.296C7.032 5.572 6.654 5.71 6.174 5.71C5.682 5.71 5.298 5.548 5.022 5.224C4.746 4.888 4.608 4.426 4.608 3.838C4.608 3.526 4.638 3.208 4.698 2.884C4.758 2.548 4.872 2.206 5.04 1.858C5.22 1.498 5.472 1.114 5.796 0.705999Z"
                                    fill="#FF9900" />
                            </svg>

                        </div>
                        <div>
                            <div class="cit">
                                Меня зовут Климентий, мне 35 лет. В 2023 году мне поставили диагноз - рак прямой кишки 3
                                стадии.
                                Я прошёл 25 сеансов облучения, 5 сеансов химиотерапии, но вердикт был неутешительный -
                                необходима операция резекции пораженного участка прямой кишки. Несмотря на все
                                обстоятельства я
                                отказался от хирургического вмешательства и продолжаю бороться с болезнью своими силами.
                                Я знаю
                                как это непросто, больно и мучительно. Однако, несмотря ни на что я продолжаю жить
                                полной
                                насыщенной жизнью, в которой присутствует вера, надежда, радость и любовь. Жизнь
                                приобрела новый
                                смысл, благодаря которому я не отчаиваюсь и не падаю духом.
                            </div>
                            <a href="#" class="read-more yellow">Читать полностью</a>
                        </div>

                    </blockquote>

                </div>
            </div>

            <div class="card">
                <div class="card__person">
                    <div class="card__image">
                        <div class="card__photo">
                            <img src="@asset('images/stories/2.png')">
                        </div>
                    </div>
                    <div class="card__info">
                        <div class="card__name">
                            <span>Марина Козырева</span>
                        </div>
                        <div class="card__age">
                            <span>58 лет</span>
                        </div>
                    </div>
                </div>
                <div class="card__quote_green">
                    <blockquote class="collapsible-quote">
                        <div>
                            <svg width="8" height="6" viewBox="0 0 8 6" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M1.98 0.705999C2.148 0.478 2.334 0.351999 2.538 0.327999C2.742 0.303999 2.916 0.345999 3.06 0.454C3.216 0.55 3.3 0.7 3.312 0.903999C3.336 1.108 3.252 1.324 3.06 1.552C2.784 1.876 2.598 2.2 2.502 2.524C2.406 2.848 2.358 3.136 2.358 3.388L2.286 2.668C2.766 2.668 3.156 2.806 3.456 3.082C3.756 3.358 3.906 3.73 3.906 4.198C3.906 4.642 3.768 5.008 3.492 5.296C3.216 5.572 2.838 5.71 2.358 5.71C1.866 5.71 1.482 5.548 1.206 5.224C0.93 4.888 0.792 4.426 0.792 3.838C0.792 3.526 0.822 3.208 0.882 2.884C0.942 2.548 1.056 2.206 1.224 1.858C1.404 1.498 1.656 1.114 1.98 0.705999ZM5.796 0.705999C5.964 0.478 6.15 0.351999 6.354 0.327999C6.558 0.303999 6.732 0.345999 6.876 0.454C7.032 0.55 7.116 0.7 7.128 0.903999C7.152 1.108 7.068 1.324 6.876 1.552C6.6 1.876 6.414 2.2 6.318 2.524C6.222 2.848 6.174 3.136 6.174 3.388L6.102 2.668C6.582 2.668 6.972 2.806 7.272 3.082C7.572 3.358 7.722 3.73 7.722 4.198C7.722 4.642 7.584 5.008 7.308 5.296C7.032 5.572 6.654 5.71 6.174 5.71C5.682 5.71 5.298 5.548 5.022 5.224C4.746 4.888 4.608 4.426 4.608 3.838C4.608 3.526 4.638 3.208 4.698 2.884C4.758 2.548 4.872 2.206 5.04 1.858C5.22 1.498 5.472 1.114 5.796 0.705999Z"
                                    fill="#0FCD72" />
                            </svg>

                        </div>
                        <div>
                            <div class="cit">
                                Меня зовут Марина, мне 58 лет.
                                <br><br>
                                В 2021 году у меня обнаружили рак шейки матки. Мне сделали операцию и обнаружилось, что
                                болезнь
                                перешла в матку и начала прогрессировать. В результате пришлось удалить матку полностью.
                                Несмотря на страх и отчаяние я не ушла в себя и нашла силы бороться. Я готова была идти
                                до
                                конца. С тех пор прошло уже 3 года и в этом году меня сняли с учёта и я живу полноценной
                                жизнью.
                                Я прекрасно понимаю какие чувства испытывает человек в подобной ситуации, но,поверьте
                                мне,
                                диагноз рак - это не повод опускать руки. Болезнь можно победить...
                            </div>
                            <a href="#" class="read-more green">Читать полностью</a>
                        </div>
                    </blockquote>
                </div>
            </div>
        </div>
    </div>
</section>
<script>
document.addEventListener('DOMContentLoaded', () => {
    const readMoreLinks = document.querySelectorAll('.read-more');
    const mediaQuery = window.matchMedia('(max-width: 1023px)');

    function toggleReadMoreLogic() {
        if (mediaQuery.matches) {
            // Активируем логику на маленьких экранах
            readMoreLinks.forEach(link => {
                const quoteText = link.previousElementSibling;

                if (!quoteText) return;

                link.addEventListener('click', (event) => {
                    event.preventDefault();

                    if (quoteText.classList.contains('expanded')) {
                        // Свернуть текст
                        quoteText.classList.remove('expanded');
                        link.textContent = 'Читать полностью';
                        quoteText.style.maxHeight = 'calc(1.5em * 5)';
                    } else {
                        // Развернуть текст
                        quoteText.classList.add('expanded');
                        link.textContent = 'Скрыть';
                        quoteText.style.maxHeight = 'none';
                    }
                });
            });
        } else {
            // Убираем ограничения и скрываем "Читать полностью" на больших экранах
            readMoreLinks.forEach(link => {
                const quoteText = link.previousElementSibling;

                if (!quoteText) return;

                quoteText.classList.remove('expanded');
                quoteText.style.maxHeight = 'none';
                link.style.display = 'none';
            });
        }
    }

    // Запускаем функцию при загрузке страницы
    toggleReadMoreLogic();

    // Отслеживаем изменения размера экрана
    mediaQuery.addEventListener('change', toggleReadMoreLogic);
});

</script>